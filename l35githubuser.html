<!DOCTYPE html>
<html lang="en">
<head>
    <title>Github User</title>
    <style>
        body{
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;

            align-items: center;
        }
        .container{
            max-width:60vw;
           display:flex;
           justify-content: center;
           align-items: center;
           flex-direction: column;
        }

    
    </style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    
    <div class="container">
        <div class="col-md-6 mx-auto">
            <div class="card rounded-0">
                <div class="card-header">
                    <form action="" method="get" id="form">
                        <div class="form-group">
                            <input type="search" name="" id="search" class="form-control form-control-sm" placeholder="Search github account..">
                        </div>
                    </form>
                </div>
                <div class="card-body" id="displayone">
                    <!-- <img src="" alt="userimg" srcset="" class="rounded-circle"/>
                    <h3 class="card-title">User Name</h3>
                    <h3 class="card-subtitle">Bio</h3>
                <ul class="list-group">
                    <li class="list-group-item">Repositories : <span class="fw-bold">100</span></li>
                    <li class="list-group-item">Followers : <span class="fw-bold">200</span></li>
                    <li class="list-group-item">Following : <span class="fw-bold">300</span></li> -->
                </ul>
                </div>
                <div class="card-footer" id="displaytwo">
                    <div class="dropdown float-end">
                        <a href="javascript:void(0);" class="btn btn-success btn-sm rounded-0 dropdown-toogle" data-bs-toggle="dropdown-toggle">
                            Repositories Link 
                        </a>
                            <ul id="displaylistgroup" class="dropdown-meun">
                                <!-- <li><a href="" class="dropdown-item">Sample Link</a></li> -->
                            </ul>
                       
                    </div>
                </div>
            </div>
        </div>
    </div>
 <script type="text/javascript">
    const getform = document.getElementById('form');
    const getsearch = document.getElementById('search');
    const getdisplayone = document.getElementById('displayone');
    const getdisplaytwo = document.getElementById('displaytwo');
    const getdisplaylistgroup = document.getElementById('displaylistgroup');


    getform.addEventListener('submit',(e)=>
    {
        e.preventDefault();
        const getusername = getsearch.value;
        // console.log(getusername);


        if(getusername.trim()){
            getresult(getusername);
            getsearch="";
            getsearch.focus();
        }
        else{
            window.alert("Please Enter a serach value");
        };
    });

    const url ="https://api.github.com/users/";

    getresult("naymonmdy");

    
    function getresult(username){
        axios({
            method:"GET",
            url:url+username
        }).then((response)=>{
            //ES6 style
            const {data} = response;
            // console.log(data);

            cardbodytodom(data);
            resultrepos(username);

        }).catch((err)=>{
            // console.log(err);
            if(err.response.status===404){
                getdisplayone.innerHTML = `
                <div class="alert alert-danger text-center">No Data Found !!!</div>
                `;
                getdisplaylistgroup.innerHTML= `
                <li><a href="javascript:void(0);"class="dropdwon-item">No Data </a></li>`;
            }

        })
    };

    function cardbodytodom (user){
        console.log(user);

        getdisplayone.innerHTML= `
        <img src="${user.avatar_url}" alt="userimg" srcset="" class="rounded-circle"/>
                <h3 class="card-title">${user.name}</h3>
                <p class="card-subtitle">${user.bio}</p>
                <ul class="list-group">
                    <li class="list-group-item">Repositories : <span class="fw-bold">${user.public_repos}</span></li>
                    <li class="list-group-item">Followers : <span class="fw-bold">${user.followers}</span></li>
                    <li class="list-group-item">Following : <span class="fw-bold">${user.following}</span></li>
                </ul>`;

    }

    function resultrepos(username){
        // console.log(username);


        $.ajax({
            method:"GET",
            url:url+username+`/repos`,
            dataType:'json'
        }).done((data)=>{
            // console.log(data);

            cardfootertodom(data);
        }).fail(()=>{
            console.log("error");
        })

    }

    function cardfootertodom(repositories){
        getdisplay.innerHTML='';
        repositories.forEach(repositorie => {
            
         getdisplaylistgroup.innerHTML +=`
         <li><a href="${repositorie.html_url}" class="dropdown-item" target="_blank">${repositorie.name}</a></li> 

        `
        ;
        });

       
    }

 </script>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>

<!-- Github Profile> Github DOCs> Developers>REST API >USERs>users> Get the anthenticated user
https://api.gitub.com -->